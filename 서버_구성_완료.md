# âœ… ë¡œì»¬ ì„œë²„ êµ¬ì„± ì™„ë£Œ!

**ì¼ì‹œ**: 2025-11-09  
**ìƒíƒœ**: âœ… PM2ë¡œ í”„ë¡ì‹œ ì„œë²„ ì‹¤í–‰ ì¤‘

---

## ğŸ‰ í˜„ì¬ ìƒíƒœ

### âœ… ì™„ë£Œëœ ì‘ì—…
- âœ… PM2 ì„¤ì¹˜ ì™„ë£Œ
- âœ… í”„ë¡ì‹œ ì„œë²„ ì‹¤í–‰ ì¤‘ (`chlifes-proxy`)
- âœ… í—¬ìŠ¤ ì²´í¬ ì •ìƒ ì‘ë™ í™•ì¸

### ğŸ“Š í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤

```bash
pm2 status
```

**ê²°ê³¼**:
```
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name             â”‚ mode    â”‚ pid     â”‚ uptime   â”‚ status  â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ chlifes-proxy    â”‚ fork    â”‚ 12194   â”‚ 3s       â”‚ online  â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ ë‹¤ìŒ ë‹¨ê³„

### 1. ìë™ ì‹œì‘ ì„¤ì • (ì»´í“¨í„° ì¬ë¶€íŒ… ì‹œ ìë™ ì‹¤í–‰)

```bash
# ìë™ ì‹œì‘ ì„¤ì • ëª…ë ¹ì–´ ìƒì„±
pm2 startup

# ì¶œë ¥ëœ ëª…ë ¹ì–´ ì‹¤í–‰ (ì˜ˆì‹œ):
sudo env PATH=$PATH:/Users/hasanghyeon/.nvm/versions/node/v20.19.5/bin pm2 startup launchd -u hasanghyeon --hp /Users/hasanghyeon

# í˜„ì¬ ì„¤ì • ì €ì¥
pm2 save
```

### 2. Cloudflare Tunnel ì‹¤í–‰

```bash
# Cloudflare ë¡œê·¸ì¸ (ìµœì´ˆ 1íšŒ)
cloudflared tunnel login

# í„°ë„ ìƒì„± (ìµœì´ˆ 1íšŒ)
cloudflared tunnel create chlifes-proxy

# PM2ë¡œ í„°ë„ ì‹¤í–‰
pm2 start --name chlifes-tunnel -- cloudflared tunnel run chlifes-proxy --url http://localhost:3001
pm2 save
```

### 3. Tunnel URL í™•ì¸

```bash
# Tunnel URL í™•ì¸
pm2 logs chlifes-tunnel | grep -i "trycloudflare"
```

**ê²°ê³¼ ì˜ˆì‹œ**:
```
https://xxxx-xxxx-xxxx.trycloudflare.com
```

### 4. Vercel í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

```bash
cd /Users/hasanghyeon/brother_site/muyi-giftcard

# í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€
vercel env add CHLIFES_PROXY_URL production

# ê°’ ì…ë ¥ (Tunnel URL + /proxy/chlifes):
# https://xxxx-xxxx-xxxx.trycloudflare.com/proxy/chlifes
```

### 5. í´ë¼ì´í”„ìŠ¤ IP ë“±ë¡ ìš”ì²­

**ë“±ë¡í•  IP**: `180.80.147.23`

í´ë¼ì´í”„ìŠ¤ì— ë‹¤ìŒ ë‚´ìš©ìœ¼ë¡œ ìš”ì²­:
```
ì•ˆë…•í•˜ì„¸ìš”,

í”„ë¡œë•ì…˜ API ì ‘ê·¼ì„ ìœ„í•´ ë‹¤ìŒ IPë¥¼ í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€í•´ì£¼ì„¸ìš”.

IP ì£¼ì†Œ: 180.80.147.23
ì„œë²„: api.chlifes.co.kr
ìš©ë„: Brother ìƒí’ˆê¶Œ API ì—°ë™

ê°ì‚¬í•©ë‹ˆë‹¤.
```

---

## ğŸ“ ìœ ìš©í•œ PM2 ëª…ë ¹ì–´

```bash
# ìƒíƒœ í™•ì¸
pm2 status

# ë¡œê·¸ í™•ì¸
pm2 logs chlifes-proxy
pm2 logs chlifes-tunnel

# ì¬ì‹œì‘
pm2 restart chlifes-proxy
pm2 restart all

# ì¤‘ì§€
pm2 stop chlifes-proxy

# ì‚­ì œ
pm2 delete chlifes-proxy

# ëª¨ë‹ˆí„°ë§
pm2 monit
```

---

## ğŸ³ Docker ë°©ë²• (ì„ íƒì‚¬í•­)

Dockerë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´:

```bash
# Docker ì´ë¯¸ì§€ ë¹Œë“œ
docker build -t chlifes-proxy .

# ì»¨í…Œì´ë„ˆ ì‹¤í–‰
docker-compose up -d

# ìƒíƒœ í™•ì¸
docker-compose ps

# ë¡œê·¸ í™•ì¸
docker-compose logs -f
```

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] PM2 ì„¤ì¹˜
- [x] í”„ë¡ì‹œ ì„œë²„ ì‹¤í–‰
- [ ] ìë™ ì‹œì‘ ì„¤ì • (`pm2 startup` ì‹¤í–‰)
- [ ] Cloudflare Tunnel ì‹¤í–‰
- [ ] Tunnel URL í™•ì¸
- [ ] Vercel í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
- [ ] í´ë¼ì´í”„ìŠ¤ IP ë“±ë¡ ìš”ì²­
- [ ] ì¬ë°°í¬ ë° í…ŒìŠ¤íŠ¸

---

## ğŸ¯ í˜„ì¬ê¹Œì§€ ì™„ë£Œ

1. âœ… í”„ë¡ì‹œ ì„œë²„ ì½”ë“œ ìƒì„±
2. âœ… PM2 ì„¤ì¹˜ ë° ì‹¤í–‰
3. âœ… í—¬ìŠ¤ ì²´í¬ ì •ìƒ ì‘ë™ í™•ì¸

**ë‹¤ìŒ**: Cloudflare Tunnel ì‹¤í–‰ ë° Vercel ì„¤ì •

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-11-09

