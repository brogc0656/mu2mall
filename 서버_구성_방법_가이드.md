# ë¡œì»¬ ì»´í“¨í„° ì„œë²„ êµ¬ì„± ë°©ë²• ê°€ì´ë“œ

**ëª©ì **: ë¡œì»¬ ì»´í“¨í„°ë¥¼ 24/7 ìš´ì˜ ê°€ëŠ¥í•œ í”„ë¡ì‹œ ì„œë²„ë¡œ êµ¬ì„±

---

## ğŸ¯ ë°©ë²• ë¹„êµ

| ë°©ë²• | ë³µì¡ë„ | ìë™ ì¬ì‹œì‘ | ì¶”ì²œë„ | ë¹„ê³  |
|------|--------|------------|--------|------|
| **PM2** | ë‚®ìŒ | âœ… | â­â­â­â­â­ | ê°€ì¥ ê°„ë‹¨ |
| **Docker** | ì¤‘ê°„ | âœ… | â­â­â­â­ | ê²©ë¦¬, ê´€ë¦¬ ìš©ì´ |
| **launchd** | ì¤‘ê°„ | âœ… | â­â­â­â­ | macOS ë„¤ì´í‹°ë¸Œ |
| **ìˆ˜ë™ ì‹¤í–‰** | ë‚®ìŒ | âŒ | â­â­ | í…ŒìŠ¤íŠ¸ìš© |

---

## ë°©ë²• 1: PM2 (ê°€ì¥ ì¶”ì²œ) â­â­â­â­â­

### ì¥ì 
- âœ… ì„¤ì • ë§¤ìš° ê°„ë‹¨
- âœ… ìë™ ì¬ì‹œì‘
- âœ… ë¡œê·¸ ê´€ë¦¬
- âœ… ëª¨ë‹ˆí„°ë§ ê¸°ëŠ¥

### ì„¤ì¹˜ ë° ì„¤ì •

```bash
# 1. PM2 ì„¤ì¹˜
npm install -g pm2

# 2. í”„ë¡ì‹œ ì„œë²„ ì‹¤í–‰
cd /Users/hasanghyeon/brother_site/muyi-giftcard
pm2 start proxy-server.js --name chlifes-proxy

# 3. ìë™ ì‹œì‘ ì„¤ì • (ì»´í“¨í„° ì¬ë¶€íŒ… ì‹œ ìë™ ì‹¤í–‰)
pm2 startup
# ì¶œë ¥ëœ ëª…ë ¹ì–´ ì‹¤í–‰ (ì˜ˆ: sudo env PATH=... pm2 startup launchd -u hasanghyeon --hp /Users/hasanghyeon)

# 4. í˜„ì¬ ì„¤ì • ì €ì¥
pm2 save

# 5. ìƒíƒœ í™•ì¸
pm2 status

# 6. ë¡œê·¸ í™•ì¸
pm2 logs chlifes-proxy

# 7. Cloudflare Tunnelë„ PM2ë¡œ ì‹¤í–‰
pm2 start --name chlifes-tunnel -- cloudflared tunnel run chlifes-proxy --url http://localhost:3001
pm2 save
```

### PM2 ëª…ë ¹ì–´

```bash
# ì„œë²„ ì‹œì‘
pm2 start chlifes-proxy

# ì„œë²„ ì¤‘ì§€
pm2 stop chlifes-proxy

# ì„œë²„ ì¬ì‹œì‘
pm2 restart chlifes-proxy

# ì„œë²„ ì‚­ì œ
pm2 delete chlifes-proxy

# ëª¨ë‹ˆí„°ë§
pm2 monit

# ë¡œê·¸ ì‹¤ì‹œê°„ í™•ì¸
pm2 logs chlifes-proxy --lines 50
```

---

## ë°©ë²• 2: Docker (ê²©ë¦¬, ê´€ë¦¬ ìš©ì´) â­â­â­â­

### ì¥ì 
- âœ… ê²©ë¦¬ëœ í™˜ê²½
- âœ… ìë™ ì¬ì‹œì‘
- âœ… ë¡œê·¸ ê´€ë¦¬
- âœ… ë°°í¬ ìš©ì´

### ì„¤ì¹˜ ë° ì„¤ì •

```bash
# 1. Docker ì„¤ì¹˜ í™•ì¸
docker --version

# 2. Docker ì´ë¯¸ì§€ ë¹Œë“œ
cd /Users/hasanghyeon/brother_site/muyi-giftcard
docker build -t chlifes-proxy .

# 3. Docker ì»¨í…Œì´ë„ˆ ì‹¤í–‰
docker-compose up -d

# 4. ìƒíƒœ í™•ì¸
docker-compose ps

# 5. ë¡œê·¸ í™•ì¸
docker-compose logs -f chlifes-proxy

# 6. ìë™ ì‹œì‘ ì„¤ì • (Docker Desktop ì„¤ì •ì—ì„œ)
# Docker Desktop â†’ Settings â†’ General â†’ Start Docker Desktop when you log in
```

### Docker ëª…ë ¹ì–´

```bash
# ì»¨í…Œì´ë„ˆ ì‹œì‘
docker-compose start

# ì»¨í…Œì´ë„ˆ ì¤‘ì§€
docker-compose stop

# ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
docker-compose restart

# ì»¨í…Œì´ë„ˆ ì‚­ì œ
docker-compose down

# ë¡œê·¸ í™•ì¸
docker-compose logs -f
```

---

## ë°©ë²• 3: launchd (macOS ë„¤ì´í‹°ë¸Œ) â­â­â­â­

### ì¥ì 
- âœ… macOS ì‹œìŠ¤í…œ ì„œë¹„ìŠ¤
- âœ… ìë™ ì¬ì‹œì‘
- âœ… ì‹œìŠ¤í…œ ë¶€íŒ… ì‹œ ìë™ ì‹¤í–‰

### ì„¤ì •

```bash
# 1. ë¡œê·¸ ë””ë ‰í† ë¦¬ ìƒì„±
mkdir -p /Users/hasanghyeon/brother_site/muyi-giftcard/logs

# 2. launchd ì„œë¹„ìŠ¤ ë“±ë¡
sudo cp com.brother.chlifes-proxy.plist /Library/LaunchDaemons/
sudo chown root:wheel /Library/LaunchDaemons/com.brother.chlifes-proxy.plist

# 3. ì„œë¹„ìŠ¤ ì‹œì‘
sudo launchctl load /Library/LaunchDaemons/com.brother.chlifes-proxy.plist

# 4. ìƒíƒœ í™•ì¸
sudo launchctl list | grep chlifes-proxy

# 5. ë¡œê·¸ í™•ì¸
tail -f /Users/hasanghyeon/brother_site/muyi-giftcard/logs/proxy-server.log
```

### launchd ëª…ë ¹ì–´

```bash
# ì„œë¹„ìŠ¤ ì‹œì‘
sudo launchctl load /Library/LaunchDaemons/com.brother.chlifes-proxy.plist

# ì„œë¹„ìŠ¤ ì¤‘ì§€
sudo launchctl unload /Library/LaunchDaemons/com.brother.chlifes-proxy.plist

# ì„œë¹„ìŠ¤ ì¬ì‹œì‘
sudo launchctl unload /Library/LaunchDaemons/com.brother.chlifes-proxy.plist
sudo launchctl load /Library/LaunchDaemons/com.brother.chlifes-proxy.plist
```

---

## ğŸ¯ ìµœì¢… ì¶”ì²œ

### ìš°ì„ ìˆœìœ„ 1: PM2 â­â­â­â­â­
**ì´ìœ **:
- ê°€ì¥ ê°„ë‹¨
- ì„¤ì • ì‹œê°„: 5ë¶„
- ìë™ ì¬ì‹œì‘ ë³´ì¥
- ë¡œê·¸ ê´€ë¦¬ í¸ë¦¬

### ìš°ì„ ìˆœìœ„ 2: Docker â­â­â­â­
**ì´ìœ **:
- ê²©ë¦¬ëœ í™˜ê²½
- ë°°í¬ ìš©ì´
- ì„¤ì • ì‹œê°„: 10ë¶„

### ìš°ì„ ìˆœìœ„ 3: launchd â­â­â­â­
**ì´ìœ **:
- macOS ë„¤ì´í‹°ë¸Œ
- ì‹œìŠ¤í…œ ë ˆë²¨ ì„œë¹„ìŠ¤
- ì„¤ì • ì‹œê°„: 10ë¶„

---

## ğŸ“‹ ì „ì²´ ì„¤ì • ìŠ¤í¬ë¦½íŠ¸ (PM2)

```bash
#!/bin/bash
# setup-proxy-server.sh

cd /Users/hasanghyeon/brother_site/muyi-giftcard

# 1. ì˜ì¡´ì„± ì„¤ì¹˜
npm install express cors

# 2. PM2 ì„¤ì¹˜
npm install -g pm2

# 3. í”„ë¡ì‹œ ì„œë²„ ì‹œì‘
pm2 start proxy-server.js --name chlifes-proxy

# 4. Cloudflare Tunnel ì‹œì‘
pm2 start --name chlifes-tunnel -- cloudflared tunnel run chlifes-proxy --url http://localhost:3001

# 5. ìë™ ì‹œì‘ ì„¤ì •
pm2 startup
pm2 save

echo "âœ… í”„ë¡ì‹œ ì„œë²„ ì„¤ì • ì™„ë£Œ!"
echo "ğŸ“Š ìƒíƒœ í™•ì¸: pm2 status"
echo "ğŸ“ ë¡œê·¸ í™•ì¸: pm2 logs"
```

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

### PM2 ì‚¬ìš© ì‹œ
- [ ] PM2 ì„¤ì¹˜
- [ ] í”„ë¡ì‹œ ì„œë²„ PM2ë¡œ ì‹¤í–‰
- [ ] Cloudflare Tunnel PM2ë¡œ ì‹¤í–‰
- [ ] ìë™ ì‹œì‘ ì„¤ì •
- [ ] ì¬ë¶€íŒ… í›„ ìë™ ì‹¤í–‰ í™•ì¸

### Docker ì‚¬ìš© ì‹œ
- [ ] Docker ì„¤ì¹˜
- [ ] Dockerfile ë¹Œë“œ
- [ ] docker-compose ì‹¤í–‰
- [ ] ìë™ ì‹œì‘ ì„¤ì •
- [ ] ë¡œê·¸ í™•ì¸

### launchd ì‚¬ìš© ì‹œ
- [ ] plist íŒŒì¼ ìƒì„±
- [ ] LaunchDaemonsì— ë³µì‚¬
- [ ] ì„œë¹„ìŠ¤ ë“±ë¡
- [ ] ìë™ ì‹œì‘ í™•ì¸

---

**ê²°ë¡ **: **PM2ê°€ ê°€ì¥ ê°„ë‹¨í•˜ê³  ì¶”ì²œí•©ë‹ˆë‹¤!** Dockerë‚˜ launchdëŠ” ë” ê³ ê¸‰ ê¸°ëŠ¥ì´ í•„ìš”í•  ë•Œ ì‚¬ìš©í•˜ì„¸ìš”.

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-11-09

