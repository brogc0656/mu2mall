# í”„ë¡ì‹œ ì„œë²„ ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ

**ëª©ì **: ë¡œì»¬ ì»´í“¨í„°ë¥¼ í”„ë¡ì‹œ ì„œë²„ë¡œ ì‚¬ìš©í•˜ì—¬ í´ë¼ì´í”„ìŠ¤ í”„ë¡œë•ì…˜ API ì ‘ê·¼

---

## ğŸš€ 3ë‹¨ê³„ë¡œ ì‹œì‘í•˜ê¸°

### 1ë‹¨ê³„: í”„ë¡ì‹œ ì„œë²„ ì‹¤í–‰

```bash
cd /Users/hasanghyeon/brother_site/muyi-giftcard
node proxy-server.js
```

**í™•ì¸**: ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:3001/health` ì ‘ì†
- `{"status":"ok"}` ì‘ë‹µ í™•ì¸

---

### 2ë‹¨ê³„: Cloudflare Tunnel ì‹¤í–‰

**ìƒˆ í„°ë¯¸ë„ ì°½ì—ì„œ**:

```bash
# Cloudflare ë¡œê·¸ì¸ (ìµœì´ˆ 1íšŒ)
cloudflared tunnel login

# í„°ë„ ìƒì„± (ìµœì´ˆ 1íšŒ)
cloudflared tunnel create chlifes-proxy

# í„°ë„ ì‹¤í–‰
cloudflared tunnel run chlifes-proxy --url http://localhost:3001
```

**ê²°ê³¼**:
```
+--------------------------------------------------------------------------------------------+
|  Your quick Tunnel has been created! Visit it at:                                         |
|  https://xxxx-xxxx-xxxx.trycloudflare.com                                                 |
+--------------------------------------------------------------------------------------------+
```

**ì´ URLì„ ë³µì‚¬í•˜ì„¸ìš”!**

---

### 3ë‹¨ê³„: Vercel í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

```bash
cd /Users/hasanghyeon/brother_site/muyi-giftcard

# í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€
vercel env add CHLIFES_PROXY_URL production

# ê°’ ì…ë ¥ (ì˜ˆì‹œ):
# https://xxxx-xxxx-xxxx.trycloudflare.com/proxy/chlifes
```

**ì¬ë°°í¬**:
```bash
vercel --prod
```

---

## ğŸ“‹ í´ë¼ì´í”„ìŠ¤ IP ë“±ë¡

### ë“±ë¡í•  IP

**í˜„ì¬ ê³µì¸ IP**: `180.80.147.23`

**í´ë¼ì´í”„ìŠ¤ì— ë“±ë¡ ìš”ì²­**:
```
ì•ˆë…•í•˜ì„¸ìš”,

í”„ë¡œë•ì…˜ API ì ‘ê·¼ì„ ìœ„í•´ ë‹¤ìŒ IPë¥¼ í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€í•´ì£¼ì„¸ìš”.

IP ì£¼ì†Œ: 180.80.147.23
ì„œë²„: api.chlifes.co.kr
ìš©ë„: Brother ìƒí’ˆê¶Œ API ì—°ë™

ê°ì‚¬í•©ë‹ˆë‹¤.
```

---

## âœ… PM2ë¡œ ìë™ ì‹¤í–‰ ì„¤ì •

### ì„¤ì¹˜ ë° ì„¤ì •

```bash
# PM2 ì„¤ì¹˜
npm install -g pm2

# í”„ë¡ì‹œ ì„œë²„ë¥¼ PM2ë¡œ ì‹¤í–‰
cd /Users/hasanghyeon/brother_site/muyi-giftcard
pm2 start proxy-server.js --name chlifes-proxy

# ìë™ ì‹œì‘ ì„¤ì • (ì»´í“¨í„° ì¬ë¶€íŒ… ì‹œ ìë™ ì‹¤í–‰)
pm2 startup
pm2 save

# ìƒíƒœ í™•ì¸
pm2 status
```

### Cloudflare Tunnelë„ ìë™ ì‹¤í–‰

```bash
# PM2ë¡œ Cloudflare Tunnel ì‹¤í–‰
pm2 start --name chlifes-tunnel -- cloudflared tunnel run chlifes-proxy --url http://localhost:3001

# ìë™ ì‹œì‘ ì„¤ì •
pm2 save
```

---

## ğŸ” í…ŒìŠ¤íŠ¸

### ë¡œì»¬ í…ŒìŠ¤íŠ¸

```bash
# í”„ë¡ì‹œ ì„œë²„ ì‹¤í–‰ ì¤‘ì¸ ìƒíƒœì—ì„œ
curl -X POST http://localhost:3001/proxy/chlifes/bro/gift_add.php \
  -H "Content-Type: application/json" \
  -d '{
    "GENID": "AG20181105144054",
    "CMD": "ADD",
    "GIFTNM": "TE20241216184900",
    "FACE_PRICE": "test",
    "ISSUE_REQ_SN": "TEST'$(date +%s)'",
    "RECV_HPNO": "test",
    "MESSAGE": "test",
    "VALID_DAY": "30"
  }'
```

### Cloudflare Tunnel í…ŒìŠ¤íŠ¸

```bash
# Tunnel URLë¡œ í…ŒìŠ¤íŠ¸
curl -X POST https://xxxx-xxxx-xxxx.trycloudflare.com/proxy/chlifes/bro/gift_add.php \
  -H "Content-Type: application/json" \
  -d '{
    "GENID": "AG20181105144054",
    "CMD": "ADD",
    "GIFTNM": "TE20241216184900",
    "FACE_PRICE": "test",
    "ISSUE_REQ_SN": "TEST'$(date +%s)'",
    "RECV_HPNO": "test",
    "MESSAGE": "test",
    "VALID_DAY": "30"
  }'
```

---

## ğŸ“Š í˜„ì¬ ìƒíƒœ

### í™•ì¸ëœ ì •ë³´
- âœ… ê³µì¸ IP: `180.80.147.23`
- âœ… ë¡œì»¬ IP: `192.168.219.104`
- âœ… Cloudflare Tunnel ì„¤ì¹˜ë¨
- âœ… í”„ë¡ì‹œ ì„œë²„ ì½”ë“œ ì¤€ë¹„ë¨

### ë‹¤ìŒ ë‹¨ê³„
1. í”„ë¡ì‹œ ì„œë²„ ì‹¤í–‰
2. Cloudflare Tunnel ì‹¤í–‰
3. URL í™•ì¸ ë° Vercel í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
4. í´ë¼ì´í”„ìŠ¤ì— IP ë“±ë¡ ìš”ì²­
5. í…ŒìŠ¤íŠ¸ ë° ë°°í¬

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-11-09

